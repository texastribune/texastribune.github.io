<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name='robots' content='noindex,nofollow' />

        
        
        
         
        

        <title>The Texas Tribune Helpbot</title>

        <meta name="description" content="Build a helpbot on top of your internal documents." />

        <meta property="og:title" content="The Texas Tribune Helpbot" />
        <meta property="og:description" content="Build a helpbot on top of your internal documents.">
        <meta property="og:image" content="https://texastribune.github.io/images/posts/cover1.jpg" />
        <meta name="og:image:alt" content="The Texas Tribune logo on the side of a building" />
        <meta property="og:url" content="https://texastribune.github.io/eng_posts/2024-09-24/" />

        <meta name="twitter:title" content="The Texas Tribune Helpbot" />
        <meta property="twitter:description" content="Build a helpbot on top of your internal documents.">
        <meta name="twitter:image" content="https://texastribune.github.io/images/posts/cover1.jpg" />
        <meta name="twitter:image:alt" content="The Texas Tribune logo on the side of a building" />
        <meta name="twitter:card" content="summary_large_image" />

        <link rel="icon" type="image/png" sizes="48x48" href="https://www.texastribune.org/static/images/favicon-48x48.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://www.texastribune.org/static/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://www.texastribune.org/static/images/favicon-16x16.png">
        <link rel="apple-touch-icon" sizes="180x180" href="https://www.texastribune.org/static/images/apple-touch-icon.png">
        <link rel="stylesheet" href=/css/style.css />
        
    </head>
    <body>
        <div class="page-container">
            <div class="content-wrap">
                <header class= "has-bg-white-off">
    <nav aria-label="primary" class="c-navbar c-navbar--dark has-bg-black-off">
        <div class="c-navbar__top">
            <div class="has-bg-black-off" style="width:70%"></div>
            <div class="c-navbar__content c-navbar__content--home">
                <ul class="c-navbar__items t-uppercase">
                    <li class="c-navbar__item">
                        <a class="c-navbar__item-content c-navbar__clickable c-navbar__clickable--animated  t-size-xxs" href="/">
                            <strong>Home</strong>
                        </a>
                    </li>
                    <li class="c-navbar__item">
                        <a class="c-navbar__item-content c-navbar__clickable c-navbar__clickable--animated  t-size-xxs" href="/about">
                            <strong>About</strong>
                        </a>
                    </li>
                    <li class="c-navbar__item">
                        <a class="c-navbar__item-content c-navbar__clickable c-navbar__clickable--animated  t-size-xxs" href="/posts">
                            <strong>Blog</strong>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <a href="/">
        <span class="is-sr-only">Homepage for The Texas Tribune's engineering team</span>
        <div class="banner">
            <div class="banner-items has-xl-padding t-align-center has-text-black-off t-lsp-m t-size-b">
                <div class="logo-container">
                    <svg aria-hidden="true" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 585.7 64.51'><path fill="#222" d='M84.94 10.23v45.85H74.63V10.23H64.49V1.16H95v9.07zM120.08 56.08V33.57h-11.46v22.51H98.39V1.16h10.23v23.25h11.46V1.16h10.31v54.92zM136.78 56.08V1.16H163V10h-16v13.59h11.05v8.08H147v15.26h16v9.15zM198.62 10.23v45.85h-10.31V10.23h-10.14V1.16h30.51v9.07zM213.1 56.08V1.16h26.23V10h-16v13.59h11v8.08h-11v15.26h16v9.15zM265.89 56.08l-6.44-19-7 19h-10l11.29-27.71-10.62-27.21h10.73l6 19 6.59-19h10.07l-11 26.39 11.05 28.53zM301.7 56.08l-1.81-10.8h-9.73l-2 10.8h-9.57l11.07-54.92h11.47l11 54.92zM295.27 16l-3.71 21.2h7zM328.66 57.32c-9.4 0-15.25-5.61-15.25-14.19v-3.79h9.4v3.22c0 4 1.9 6.26 5.61 6.26s5.44-2.14 5.44-5.52c0-4.37-2.8-7.34-8.25-11.38-5.6-4-11.71-9.49-11.71-17.15C313.9 6.85 319 0 328.91 0c8.66 0 14.43 5.94 14.43 14.1v3.55H334v-3.3c0-3.38-1.72-5.85-5.19-5.85a4.63 4.63 0 0 0-4.95 4.94c0 4.62 2.72 7 8.82 11.47 6.52 4.86 11.14 9.81 11.14 17.23.02 8.86-6.08 15.18-15.16 15.18zM377.84 10.23v45.85h-10.31V10.23h-10.15V1.16h30.52v9.07zM417.57 56.41c-4.05 0-5.61-3.3-5.61-8.08V38c0-2.56-1.32-4.7-4.21-4.7h-5.36v22.78h-10.22V1.16h16.9c7.51 0 12.54 4.29 12.54 12v7.76c0 4.12-1.9 7.17-6.19 8.49a8.42 8.42 0 0 1 6.35 8.33v10.01a7.69 7.69 0 0 0 2 5.61v3zm-5.94-42.88c0-2.48-1.07-4-3.63-4h-5.61v16.2h5.2c2.64 0 4-1.4 4-4.37zM429.8 56.08V1.16H440v54.92zM465.59 56.08h-17.32V1.16h17.16c7.5 0 12.12 4 12.12 11.62v5.94c0 4.7-1.81 8.25-6.51 9.24 4.95 1.32 6.76 4.7 6.76 9.32v7.17c0 7.67-4.7 11.63-12.21 11.63zm2.15-42.55c0-2.48-1.08-4-3.63-4h-5.53v15.13h5.12c2.63 0 4-1.4 4-4.29zm.16 23c0-2.89-1.4-4.37-4-4.37h-5.28v15.5h5.78c2.55 0 3.54-1.4 3.54-4zM499.34 57.32c-8.9 0-15.5-5.69-15.5-13.94V1.16h10.39v42.22c0 3.22 1.81 5 5.11 5s5.2-1.81 5.2-5V1.16h10v42.22c-.02 8.25-6.29 13.94-15.2 13.94zM544.66 56.08L534 32.66l-3.87-8.74v32.16h-9.4V1.16h8.82L539.71 25l3.63 8.74V1.16h9.24v54.92zM559.48 56.08V1.16h26.22V10h-16v13.59h11v8.08h-11v15.26h16v9.15z'/><path d='M0 .6v63.91l12.85-8h43V.6zm40 44.63l-12.22-8.06-12.24 8.06 3.88-14.13L8 22l14.63-.68 5.15-13.76L33 21.27l14.58.73-11.44 9.1z' fill='#ffc200'/></svg>
                </div>
                <div id="typewriter" class="t-sans" aria-hidden="true">
                    <script src="/assets/main.js"></script>
                    <noscript> &lt engineering / &gt </noscript>
                </div>
            </div>
        </div>
    </a>
</header>


                <main>
  <article>
    <h1 class="post__title t-serif t-size-xxl">The Texas Tribune Helpbot</h1>
    <div class="post__description">
      <p class="has-vert-bar t-size-m has-text-yellow">
      <span class="has-text-gray-dark">
        Build a helpbot on top of your internal documents.
      </span>
      </p>
    </div>
    <p class="post__byline t-byline has-text-gray-dark">
      <span class="t-byline__item l-display-ib">By Suraj Thapa </span>
      <time class="t-byline__item l-display-ib"> Sep 24, 2024</time>
    </p>
    <figure class="post__image has-xxl-btm-marg">
        <img src="." alt="" >
    </figure>
    <div class="post__content c-story-body">
        <h2>Problem Statement</h2>
<p>We use Slack at The Texas Tribune and like many other orgs out there we use a dedicated &quot;help&quot; channel for staff to get assistance on any IT problems, account access needs, office supply requests etc. This  channel receives a high volume of questions, requiring team leads and senior management to monitor it closely to ensure timely responses. Below are some examples of the questions frequently asked.</p>
<ul>
<li>‚ÄúWho can help me reset my password in Pass&gt;‚Äù</li>
<li>‚ÄúWho can get our fellow set up on the system where her mobile phone shows our organization‚Äôs name when she makes outgoing calls for community outreach? (I‚Äôve forgotten the name of the system!)‚Äù</li>
<li>‚ÄúWho can add my teammate to the email @example distribution lists?‚Äù</li>
</ul>
<h2>Proposed Solution</h2>
<p>To address questions like these, we created an FAQ document in a Q&amp;A format. Our engineering manager also converted some tables into the Q&amp;A format. The answers to the questions are as follows:</p>
<ul>
<li>
<p>‚ÄúWho can help me reset my password in Pass?&gt;‚Äù</p>
<ul>
<li>G and A are administrators of the 1Password vault and can help you reset your password or regain access to 1Password.</li>
</ul>
</li>
<li>
<p>‚ÄúWho can get our fellow set up on the system where her mobile phone shows our organization‚Äôs name when she makes outgoing calls for community outreach? (I‚Äôve forgotten the name of the system!)‚Äù</p>
<ul>
<li>ITeam can help set up your fellow's phone so that it shows ‚ÄúOrganization Name‚Äù for outgoing community outreach calls.</li>
</ul>
</li>
<li>
<p>‚ÄúWho can add my teammate to the email @example distribution lists?‚Äù</p>
<ul>
<li>A and B can add your teammate to the email distribution lists.</li>
</ul>
</li>
</ul>
<p>The proposed solution was to use AI technology to guide people to the right resources. So, we started building a Retrieval-Augmented Generation (RAG) bot, integrated with Slack, to help direct people to the right people and places efficiently.</p>
<h2>Implementation</h2>
<h3>Attempt 1</h3>
<p>We tested Google Cloud's Agent Builder, and while it was easy to set up and integrate with Slack, the app didn‚Äôt offer much control over settings and we found it was inconsistent at times. These issues with Agent Builder prevented us from going any further with their product.</p>
<h3>Attempt 2</h3>
<p>We turned to AWS for a more custom solution and found exactly what we needed with AWS Bedrock. It provided greater control over how we work with different models and parameters, offering the flexibility we were looking for.</p>
<h4>How does this work?</h4>
<p>We leverage AWS Bedrock to interact with LLM models and integrate Slack via AWS Lambda. Let‚Äôs walk through the figure below to understand the process. A user asks a question in Slack, and the Lambda function sends it to Amazon Bedrock, which processes the query and returns the response to Slack. For more details on this integration, check out the AWS Machine Learning <a href="https://aws.amazon.com/blogs/machine-learning/deploy-a-slack-gateway-for-amazon-bedrock/">blog</a> (the image below is sourced from that blog).</p>
<figure>
  <img src="/images/posts/helpbot-architecture.png" alt="AWS slackbot">
  <figcaption>Helpbot architecture.</figcaption>
</figure>
<p>To implement a RAG system based solely on our documents, I converted the google documents to pdf, stored the PDF files to S3, and used <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-create.html">AWS Bedrock‚Äôs knowledge</a> base feature for vector data (embeddings). The knowledge base is a managed solution designed to store vector representations of documents, making retrieval fast and efficient.</p>
<h5>Models for embedding and text generations</h5>
<p>For the embeddings, we used Amazon‚Äôs Titan Embeddings G1 - Textv1.2, and opted for a semantic chunking strategy when processing the documents. During initial testing, I found that semantic chunking produced the best results for our use case. Next, I chose Amazon Bedrock's AI agent feature because we wanted a tool similar to Google‚Äôs Agent Builder. You can learn more about Agents and their capabilities <a href="https://aws.amazon.com/blogs/machine-learning/enabling-complex-generative-ai-applications-with-amazon-bedrock-agents/">here</a>. One of the key advantages of using Agent is that other team members can easily modify agents directly in the AWS console. Whether it's updating the model, knowledge base, prompts, or parameters, the team has the flexibility to make changes without relying on extensive code updates. Finally, for model selection, I went with Claude 3 Sonnet, which performed exceptionally well for our use case.</p>
<p>To minimize the maintenance, we decided early on to build the serverless infrastructure. I used AWS SAM, which allows us to keep most of the stack in our codebase. This setup includes AWS CloudFormation, Lambda, Secrets Manager, and CloudWatch.</p>
<h4>Bonus: The Texas Tribune Festival</h4>
<p>Just before The Texas Tribune Festival 2024, we uploaded the info desk document into S3 and integrated it into the helpbot‚Äôs knowledge base. The helpbot could answer Festival-related questions. However, we noticed that responses to questions involving tables were less accurate, highlighting the importance of structuring documents in a clear question-and-answer format. As a potential improvement, we could consider using the Claude model to generate embeddings instead of the Titan model‚Äîa great idea for a future blog post! ü§î</p>
<h2>Results</h2>
<p>The helpbot has been incredibly useful so far. Users can ask questions either in the all-help public channel or through direct messages with the bot. What makes this bot, particularly the Claude model, stand out is its strong understanding of human intent. You can phrase questions naturally, even with minor errors, and it will still provide accurate answers‚Äîassuming the information is covered in the Q&amp;A document.</p>
<h2>Lessons Learned</h2>
<p>There are many valuable lessons we've learned from this experience, outlined below:</p>
<ul>
<li>
<p>Expanding Question Coverage: Sometimes the helpbot can‚Äôt answer new questions that arise. This gap can erode user trust if their queries aren‚Äôt answered right away. To avoid this, it's essential to build a comprehensive Q&amp;A set from the start and continuously update it.</p>
</li>
<li>
<p>Early Evaluation Planning: It‚Äôs important to think about how you‚Äôll evaluate the bot early on. While the bot may perform well for certain queries, creating both manual and automated evaluation processes is key. Develop your test criteria and dataset upfront, and continually test the bot against any changes. (This could be a blog post in itself! üòâ)</p>
</li>
<li>
<p>Performance Measurement: Tracking performance is crucial. We‚Äôve been using CloudWatch dashboards to gather metrics, but moving forward, we should be more structured in how we measure success.</p>
</li>
<li>
<p>Managing Scope: Once users start interacting with the bot, they may ask questions outside its intended scope. Some of these can be incorporated, while others may not be relevant. It‚Äôs important to manage these expectations.</p>
</li>
<li>
<p>Prompt Customization: As obvious as it sounds, we had to fine-tune the bot‚Äôs prompts to better suit our needs and improve its accuracy.</p>
</li>
<li>
<p>Keeping Information Up-to-Date: Personnel changes are inevitable, and since the bot is often to direct users to the right departments or individuals, we must keep its information current as people leave or roles change.</p>
</li>
<li>
<p>Content-Rich Knowledge Base: Continuously update the bot with as many questions as possible. A rich, evolving knowledge base ensures that it remains useful and relevant.</p>
</li>
</ul>
<h2>Improvements</h2>
<ul>
<li>
<p>We plan to implement conversation threading within message threads, which is more of a software development challenge than an AI engineering one. We're excited to tackle this feature in the future.</p>
</li>
<li>
<p>Another improvement is the ability to handle both tables and Q&amp;A formats within a single document seamlessly‚Äîthis might even be worth another blog post! üòâ</p>
</li>
</ul>
<h2>Conclusion</h2>
<p>The helpbot is a very simple, yet powerful, tool we have built. This was great because it saved time for people who had to constantly check the slack channel. It gave us a great space to test out these tools and learn from it. Some of the lessons learned regarding evaluation, metrics, and data type will help us greatly in the future iterations.</p>
<p><br></br>
<br></br>
<i>Thank you to Ashley Hebler and Darla Cameron for bringing these ideas and helping me throughout the process. It‚Äôs been a real treat to bring this to life and learn together from it. And thank you to all the users who patiently waited for this tool to get better and provided consistent feedback!</i></p>

    </div>
  </article>
</main>

<nav aria-label="pagination" class="post-nav-container t-links t-uppercase t-lsp-b t-size-xs t-align-center t-weight-bold">
  <div class="post-nav">
  </div>
  <div class="post-nav">
  </div>
</nav>

            </div>
            <footer id="main-footer" class="has-bg-black-off has-xs-padding">
    <div class="c-icon c-icon--yellow" style="font-size: 4rem">
        <svg viewBox="0 0 174.9 200" ><path d="M0 0v200l40.2-25.1h134.6V0H0zm125.2 139.7l-38.3-25.2-38.3 25.2 12.1-44.2L25 66.8l45.8-2.1L87 21.8l16.2 42.9 45.8 2.1-35.8 28.6 12 44.3z"></path></svg>
    </div>
</footer>

        </div>
    </body>
</html>
